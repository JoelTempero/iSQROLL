<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iSQROLL - A Marketplace for the People</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0D9488;
            --primary-dark: #0F766E;
            --primary-light: #14B8A6;
            --primary-glow: rgba(13, 148, 136, 0.15);
            --accent: #F59E0B;
            --dark: #0F172A;
            --grey-600: #4B5563;
            --grey-500: #6B7280;
            --grey-400: #9CA3AF;
            --grey-300: #D1D5DB;
            --grey-200: #E5E7EB;
            --grey-100: #F3F4F6;
            --grey-50: #F9FAFB;
            --white: #FFFFFF;
            --success: #10B981;
            --error: #EF4444;
            --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --font-display: 'Space Grotesk', sans-serif;
            --font-body: 'Plus Jakarta Sans', sans-serif;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-body); background: var(--grey-50); color: var(--dark); line-height: 1.6; }
        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }
        
        /* Buttons */
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 24px; font-family: var(--font-body); font-weight: 600; font-size: 14px; border: none; border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s ease; text-decoration: none; }
        .btn-primary { background: var(--gradient-primary); color: var(--white); box-shadow: var(--shadow-md); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--white); color: var(--dark); border: 1px solid var(--grey-200); }
        .btn-secondary:hover { background: var(--grey-50); }
        .btn-ghost { background: transparent; color: var(--grey-600); }
        .btn-ghost:hover { background: var(--grey-100); }
        .btn-danger { background: var(--error); color: var(--white); }
        .btn-lg { padding: 16px 32px; font-size: 16px; }
        .btn-sm { padding: 8px 16px; font-size: 13px; }
        
        /* Header */
        .header { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border-bottom: 1px solid var(--grey-200); }
        .header-inner { display: flex; align-items: center; justify-content: space-between; height: 72px; }
        .logo { display: flex; align-items: center; gap: 10px; font-family: var(--font-display); font-size: 24px; font-weight: 700; color: var(--dark); text-decoration: none; cursor: pointer; }
        .logo-icon { width: 40px; height: 40px; background: var(--gradient-primary); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; color: var(--white); }
        .logo span { color: var(--primary); }
        .nav { display: flex; gap: 8px; }
        .nav-link { padding: 8px 16px; color: var(--grey-600); text-decoration: none; font-weight: 500; font-size: 14px; border-radius: var(--radius-sm); cursor: pointer; transition: all 0.2s ease; }
        .nav-link:hover, .nav-link.active { color: var(--dark); background: var(--grey-100); }
        .nav-actions { display: flex; align-items: center; gap: 12px; }
        
        /* User Menu */
        .user-menu { position: relative; }
        .user-avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--gradient-primary); color: var(--white); display: flex; align-items: center; justify-content: center; font-weight: 600; cursor: pointer; }
        .user-dropdown { position: absolute; top: calc(100% + 8px); right: 0; background: var(--white); border-radius: var(--radius-md); box-shadow: var(--shadow-xl); border: 1px solid var(--grey-200); min-width: 220px; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.2s ease; }
        .user-dropdown.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .user-dropdown-header { padding: 16px; border-bottom: 1px solid var(--grey-200); }
        .user-dropdown-name { font-weight: 600; }
        .user-dropdown-email { font-size: 13px; color: var(--grey-500); }
        .user-dropdown-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; color: var(--grey-600); text-decoration: none; cursor: pointer; transition: all 0.2s ease; }
        .user-dropdown-item:hover { background: var(--grey-50); color: var(--dark); }
        .user-dropdown-item.danger { color: var(--error); }
        
        /* Mobile Menu */
        .mobile-menu-btn { display: none; width: 44px; height: 44px; border: none; background: transparent; cursor: pointer; flex-direction: column; justify-content: center; align-items: center; gap: 5px; }
        .mobile-menu-btn span { display: block; width: 24px; height: 2px; background: var(--dark); }
        .mobile-nav { display: none; position: fixed; top: 72px; left: 0; right: 0; background: var(--white); border-bottom: 1px solid var(--grey-200); padding: 16px; box-shadow: var(--shadow-lg); z-index: 999; }
        .mobile-nav.active { display: block; }
        .mobile-nav a, .mobile-nav .nav-link { display: block; padding: 14px 16px; color: var(--grey-600); text-decoration: none; font-weight: 500; border-radius: var(--radius-md); }
        .mobile-nav-actions { display: flex; gap: 12px; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--grey-200); }
        .mobile-nav-actions .btn { flex: 1; }
        
        /* Page Content */
        #app { padding-top: 72px; min-height: 100vh; }
        .page-header { padding: 50px 0 40px; background: linear-gradient(180deg, var(--white) 0%, var(--grey-50) 100%); }
        .page-header h1 { font-family: var(--font-display); font-size: 36px; font-weight: 700; margin-bottom: 8px; }
        .page-header p { color: var(--grey-600); }
        
        /* Search */
        .search-section { padding: 30px 0; background: var(--white); border-bottom: 1px solid var(--grey-200); }
        .search-bar { display: flex; gap: 12px; max-width: 800px; margin: 0 auto; }
        .search-input-wrapper { flex: 1; position: relative; }
        .search-input { width: 100%; padding: 16px 20px 16px 52px; font-size: 16px; border: 2px solid var(--grey-200); border-radius: var(--radius-lg); background: var(--grey-50); }
        .search-input:focus { outline: none; border-color: var(--primary); background: var(--white); }
        .search-icon { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--grey-400); }
        .category-select { padding: 16px 20px; font-size: 16px; border: 2px solid var(--grey-200); border-radius: var(--radius-lg); background: var(--grey-50); min-width: 160px; }
        .categories { display: flex; gap: 10px; justify-content: center; margin-top: 20px; flex-wrap: wrap; }
        .category-pill { padding: 8px 20px; background: var(--grey-100); border-radius: 100px; font-size: 14px; font-weight: 500; color: var(--grey-600); cursor: pointer; border: none; transition: all 0.2s ease; }
        .category-pill:hover, .category-pill.active { background: var(--primary); color: var(--white); }
        
        /* Listings Grid */
        .listings-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; }
        .listing-card { background: var(--white); border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-sm); border: 1px solid var(--grey-200); transition: all 0.3s ease; cursor: pointer; text-decoration: none; color: inherit; display: block; }
        .listing-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
        .listing-image { position: relative; width: 100%; height: 200px; background: var(--grey-100); overflow: hidden; }
        .listing-image img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
        .listing-card:hover .listing-image img { transform: scale(1.05); }
        .listing-badge { position: absolute; top: 12px; left: 12px; padding: 4px 10px; background: var(--accent); color: var(--white); font-size: 11px; font-weight: 700; text-transform: uppercase; border-radius: 100px; }
        .listing-status { position: absolute; top: 12px; left: 12px; padding: 4px 10px; font-size: 11px; font-weight: 700; text-transform: uppercase; border-radius: 100px; }
        .listing-status.active { background: var(--success); color: var(--white); }
        .listing-status.sold { background: var(--error); color: var(--white); }
        .listing-save { position: absolute; top: 12px; right: 12px; width: 36px; height: 36px; background: var(--white); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-md); cursor: pointer; border: none; transition: all 0.2s ease; }
        .listing-save:hover, .listing-save.saved { background: var(--error); color: var(--white); }
        .listing-content { padding: 16px; }
        .listing-title { font-size: 15px; font-weight: 600; margin-bottom: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .listing-price { font-family: var(--font-display); font-size: 20px; font-weight: 700; color: var(--primary); margin-bottom: 12px; }
        .listing-meta { display: flex; justify-content: space-between; font-size: 12px; color: var(--grey-500); }
        .listing-actions { display: flex; gap: 8px; padding: 12px 16px; border-top: 1px solid var(--grey-200); }
        .listing-actions .btn { flex: 1; }
        
        /* Cards */
        .card { background: var(--white); border-radius: var(--radius-lg); border: 1px solid var(--grey-200); }
        .card-header { padding: 20px 24px; border-bottom: 1px solid var(--grey-200); display: flex; justify-content: space-between; align-items: center; }
        .card-title { font-size: 18px; font-weight: 600; }
        .card-body { padding: 24px; }
        
        /* Forms */
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; }
        .form-input { width: 100%; padding: 14px 16px; font-size: 15px; border: 2px solid var(--grey-200); border-radius: var(--radius-md); transition: all 0.2s ease; }
        .form-input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-glow); }
        .form-textarea { min-height: 120px; resize: vertical; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .form-hint { font-size: 13px; color: var(--grey-500); margin-top: 6px; }
        
        /* Image Upload */
        .image-upload-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .image-upload-item { aspect-ratio: 1; border: 2px dashed var(--grey-300); border-radius: var(--radius-md); display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; background: var(--grey-50); position: relative; overflow: hidden; transition: all 0.2s ease; }
        .image-upload-item:hover { border-color: var(--primary); background: var(--primary-glow); }
        .image-upload-item.has-image { border-style: solid; }
        .image-upload-item img { width: 100%; height: 100%; object-fit: cover; }
        .image-upload-item .remove-btn { position: absolute; top: 8px; right: 8px; width: 28px; height: 28px; background: var(--error); color: var(--white); border: none; border-radius: 50%; cursor: pointer; display: none; align-items: center; justify-content: center; }
        .image-upload-item:hover .remove-btn { display: flex; }
        
        /* Profile Layout */
        .profile-layout { display: grid; grid-template-columns: 280px 1fr; gap: 32px; padding: 40px 0 80px; }
        .profile-sidebar { position: sticky; top: 100px; height: fit-content; }
        .profile-card { background: var(--white); border-radius: var(--radius-lg); border: 1px solid var(--grey-200); padding: 24px; text-align: center; }
        .profile-avatar { width: 100px; height: 100px; border-radius: 50%; background: var(--gradient-primary); color: var(--white); display: flex; align-items: center; justify-content: center; font-size: 36px; font-weight: 600; margin: 0 auto 16px; }
        .profile-name { font-size: 20px; font-weight: 600; margin-bottom: 4px; }
        .profile-location { font-size: 14px; color: var(--grey-500); margin-bottom: 16px; }
        .profile-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; padding-top: 16px; border-top: 1px solid var(--grey-200); }
        .profile-stat-value { font-family: var(--font-display); font-size: 24px; font-weight: 700; }
        .profile-stat-label { font-size: 12px; color: var(--grey-500); }
        .profile-nav { background: var(--white); border-radius: var(--radius-lg); border: 1px solid var(--grey-200); margin-top: 16px; overflow: hidden; }
        .profile-nav-item { display: flex; align-items: center; gap: 12px; padding: 14px 20px; color: var(--grey-600); text-decoration: none; cursor: pointer; border-left: 3px solid transparent; transition: all 0.2s ease; }
        .profile-nav-item:hover { background: var(--grey-50); }
        .profile-nav-item.active { background: var(--primary-glow); color: var(--primary); border-left-color: var(--primary); }
        
        /* Listing Detail */
        .listing-detail-grid { display: grid; grid-template-columns: 1fr 400px; gap: 40px; padding: 40px 0; }
        .listing-gallery-main { aspect-ratio: 4/3; border-radius: var(--radius-lg); overflow: hidden; background: var(--grey-100); margin-bottom: 12px; }
        .listing-gallery-main img { width: 100%; height: 100%; object-fit: cover; }
        .listing-gallery-thumbs { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .listing-gallery-thumb { aspect-ratio: 1; border-radius: var(--radius-md); overflow: hidden; cursor: pointer; border: 2px solid transparent; }
        .listing-gallery-thumb:hover, .listing-gallery-thumb.active { border-color: var(--primary); }
        .listing-gallery-thumb img { width: 100%; height: 100%; object-fit: cover; }
        .listing-info-card { background: var(--white); border-radius: var(--radius-lg); border: 1px solid var(--grey-200); padding: 24px; position: sticky; top: 100px; }
        .listing-info-price { font-family: var(--font-display); font-size: 36px; font-weight: 700; color: var(--primary); margin-bottom: 8px; }
        .listing-info-title { font-size: 24px; font-weight: 600; margin-bottom: 16px; }
        .listing-info-meta { display: flex; flex-wrap: wrap; gap: 16px; padding: 16px 0; border-top: 1px solid var(--grey-200); border-bottom: 1px solid var(--grey-200); margin-bottom: 16px; }
        .listing-info-meta-item { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--grey-600); }
        .listing-info-description { color: var(--grey-600); margin-bottom: 24px; white-space: pre-line; }
        .seller-card { display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--grey-50); border-radius: var(--radius-md); margin-top: 24px; }
        .seller-avatar { width: 56px; height: 56px; border-radius: 50%; background: var(--gradient-primary); color: var(--white); display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 600; }
        .seller-info h4 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
        .seller-info p { font-size: 13px; color: var(--grey-500); }
        
        /* Empty State */
        .empty-state { text-align: center; padding: 60px 20px; }
        .empty-state-icon { width: 80px; height: 80px; background: var(--grey-100); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px; color: var(--grey-400); }
        .empty-state h3 { font-size: 20px; font-weight: 600; margin-bottom: 8px; }
        .empty-state p { color: var(--grey-500); margin-bottom: 24px; }
        
        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal { background: var(--white); border-radius: var(--radius-xl); width: 100%; max-width: 480px; max-height: 90vh; overflow-y: auto; transform: scale(0.9); transition: all 0.3s ease; margin: 16px; }
        .modal-overlay.active .modal { transform: scale(1); }
        .modal-header { padding: 24px 24px 0; display: flex; justify-content: space-between; align-items: center; }
        .modal-title { font-family: var(--font-display); font-size: 24px; font-weight: 700; }
        .modal-close { width: 40px; height: 40px; border-radius: 50%; border: none; background: var(--grey-100); cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .modal-close:hover { background: var(--grey-200); }
        .modal-body { padding: 24px; }
        .form-divider { display: flex; align-items: center; gap: 16px; margin: 24px 0; color: var(--grey-400); font-size: 13px; }
        .form-divider::before, .form-divider::after { content: ''; flex: 1; height: 1px; background: var(--grey-200); }
        .social-btn { display: flex; align-items: center; justify-content: center; gap: 12px; padding: 14px; border: 2px solid var(--grey-200); border-radius: var(--radius-md); background: var(--white); font-size: 15px; font-weight: 500; cursor: pointer; width: 100%; margin-bottom: 12px; }
        .social-btn:hover { background: var(--grey-50); }
        
        /* Demo Credentials */
        .demo-credentials { background: var(--primary-glow); border: 2px solid var(--primary); border-radius: var(--radius-md); padding: 16px; margin-bottom: 20px; }
        .demo-credentials-title { font-weight: 600; color: var(--primary-dark); margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
        .demo-credentials p { font-size: 14px; margin: 4px 0; }
        .demo-credentials code { background: var(--white); padding: 2px 8px; border-radius: 4px; font-family: monospace; font-weight: 600; }
        
        /* Toast */
        .toast { position: fixed; bottom: 24px; right: 24px; background: var(--dark); color: var(--white); padding: 16px 24px; border-radius: var(--radius-md); box-shadow: var(--shadow-xl); display: flex; align-items: center; gap: 12px; transform: translateY(100px); opacity: 0; transition: all 0.3s ease; z-index: 3000; }
        .toast.show { transform: translateY(0); opacity: 1; }
        .toast.success { background: var(--success); }
        .toast.error { background: var(--error); }
        
        /* Footer */
        .footer { background: var(--dark); color: var(--grey-400); padding: 60px 0 30px; }
        .footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 48px; margin-bottom: 48px; }
        .footer-brand p { margin-top: 16px; font-size: 14px; line-height: 1.7; }
        .footer-title { color: var(--white); font-weight: 600; margin-bottom: 20px; }
        .footer-links { list-style: none; }
        .footer-links li { margin-bottom: 12px; }
        .footer-links a { color: var(--grey-400); text-decoration: none; font-size: 14px; cursor: pointer; }
        .footer-links a:hover { color: var(--white); }
        .footer-bottom { padding-top: 30px; border-top: 1px solid #374151; display: flex; justify-content: space-between; align-items: center; font-size: 13px; flex-wrap: wrap; gap: 16px; }
        .powered-by a { color: var(--primary-light); text-decoration: none; font-weight: 600; }
        .powered-by a:hover { color: var(--white); }
        
        /* Hero specific */
        .hero { padding: 60px 0 80px; background: linear-gradient(180deg, var(--white) 0%, var(--grey-50) 100%); position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: -50%; right: -20%; width: 800px; height: 800px; background: radial-gradient(circle, var(--primary-glow) 0%, transparent 70%); pointer-events: none; }
        .hero-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; }
        .hero h1 { font-family: var(--font-display); font-size: 52px; font-weight: 700; line-height: 1.1; margin-bottom: 24px; }
        .hero h1 span { background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .hero p { font-size: 18px; color: var(--grey-600); margin-bottom: 32px; max-width: 480px; }
        .hero-actions { display: flex; gap: 16px; margin-bottom: 48px; flex-wrap: wrap; }
        .hero-stats { display: flex; gap: 48px; flex-wrap: wrap; }
        .hero-stat-value { font-family: var(--font-display); font-size: 32px; font-weight: 700; }
        .hero-stat-label { font-size: 14px; color: var(--grey-500); }
        .hero-card { background: var(--white); border-radius: var(--radius-xl); box-shadow: var(--shadow-xl); padding: 24px; transform: rotate(2deg); animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: rotate(2deg) translateY(0); } 50% { transform: rotate(2deg) translateY(-10px); } }
        .hero-card-image { height: 220px; border-radius: var(--radius-lg); overflow: hidden; margin-bottom: 16px; background: var(--grey-100); }
        .hero-card-image img { width: 100%; height: 100%; object-fit: cover; }
        
        /* Feature grid for How it Works / About */
        .features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px; padding: 60px 0; }
        .feature-card { text-align: center; padding: 32px; background: var(--white); border-radius: var(--radius-lg); border: 1px solid var(--grey-200); }
        .feature-icon { width: 64px; height: 64px; background: var(--primary-glow); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: var(--primary); }
        .feature-card h3 { font-size: 18px; font-weight: 600; margin-bottom: 12px; }
        .feature-card p { color: var(--grey-600); font-size: 14px; }
        
        /* Categories grid */
        .categories-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; padding: 40px 0 80px; }
        .category-card { background: var(--white); border-radius: var(--radius-lg); border: 1px solid var(--grey-200); padding: 32px; text-align: center; cursor: pointer; transition: all 0.3s ease; }
        .category-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); border-color: var(--primary); }
        .category-icon { width: 64px; height: 64px; background: var(--grey-100); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: 28px; }
        .category-card h3 { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
        .category-card p { color: var(--grey-500); font-size: 14px; }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .listings-grid { grid-template-columns: repeat(3, 1fr); }
            .listing-detail-grid { grid-template-columns: 1fr; }
            .listing-info-card { position: static; }
            .footer-grid { grid-template-columns: 1fr 1fr; }
            .features-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 768px) {
            .container { padding: 0 16px; }
            .header-inner { height: 64px; }
            .mobile-menu-btn { display: flex; }
            .nav, .nav-actions { display: none; }
            .logo { font-size: 20px; }
            .logo-icon { width: 36px; height: 36px; }
            #app { padding-top: 64px; }
            .hero h1 { font-size: 32px; }
            .hero-grid { grid-template-columns: 1fr; text-align: center; }
            .hero-visual { display: none; }
            .hero-actions { justify-content: center; }
            .hero-stats { justify-content: center; }
            .search-bar { flex-direction: column; }
            .category-select { width: 100%; }
            .categories { justify-content: flex-start; overflow-x: auto; flex-wrap: nowrap; padding-bottom: 8px; }
            .category-pill { flex-shrink: 0; }
            .listings-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
            .listing-image { height: 140px; }
            .listing-content { padding: 12px; }
            .listing-title { font-size: 13px; }
            .listing-price { font-size: 16px; margin-bottom: 8px; }
            .profile-layout { grid-template-columns: 1fr; }
            .profile-sidebar { position: static; }
            .image-upload-grid { grid-template-columns: repeat(2, 1fr); }
            .form-row { grid-template-columns: 1fr; }
            .footer-grid { grid-template-columns: 1fr; gap: 32px; }
            .footer-bottom { flex-direction: column; text-align: center; }
            .features-grid, .categories-grid { grid-template-columns: 1fr; }
            .toast { left: 16px; right: 16px; }
        }
        @media (max-width: 480px) {
            .listings-grid { grid-template-columns: 1fr; }
            .listing-image { height: 200px; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-inner">
            <div class="logo" onclick="navigate('home')">
                <div class="logo-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                        <polyline points="9,22 9,12 15,12 15,22"/>
                    </svg>
                </div>
                i<span>SQROLL</span>
            </div>
            <nav class="nav">
                <span class="nav-link" onclick="navigate('browse')">Browse</span>
                <span class="nav-link" onclick="navigate('categories')">Categories</span>
                <span class="nav-link" onclick="navigate('how-it-works')">How it Works</span>
                <span class="nav-link" onclick="navigate('about')">About</span>
            </nav>
            <div class="nav-actions" id="navActions">
                <button class="btn btn-ghost" onclick="openModal('login')">Log in</button>
                <button class="btn btn-primary" onclick="openModal('signup')">Sign up</button>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <span></span><span></span><span></span>
            </button>
        </div>
        <nav class="mobile-nav" id="mobileNav">
            <span class="nav-link" onclick="navigate('browse'); toggleMobileMenu();">Browse</span>
            <span class="nav-link" onclick="navigate('categories'); toggleMobileMenu();">Categories</span>
            <span class="nav-link" onclick="navigate('how-it-works'); toggleMobileMenu();">How it Works</span>
            <span class="nav-link" onclick="navigate('about'); toggleMobileMenu();">About</span>
            <div class="mobile-nav-actions" id="mobileNavActions">
                <button class="btn btn-secondary" onclick="openModal('login'); toggleMobileMenu();">Log in</button>
                <button class="btn btn-primary" onclick="openModal('signup'); toggleMobileMenu();">Sign up</button>
            </div>
        </nav>
    </header>

    <!-- Main App Container -->
    <div id="app"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <div class="logo" style="color: white; cursor: pointer;" onclick="navigate('home')">
                        <div class="logo-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                                <polyline points="9,22 9,12 15,12 15,22"/>
                            </svg>
                        </div>
                        i<span>SQROLL</span>
                    </div>
                    <p>A marketplace for the people. Buy and sell with Kiwis you can trust, right in your neighbourhood.</p>
                </div>
                <div>
                    <h4 class="footer-title">Marketplace</h4>
                    <ul class="footer-links">
                        <li><a onclick="navigate('browse')">Browse Listings</a></li>
                        <li><a onclick="navigate('categories')">Categories</a></li>
                        <li><a onclick="navigate('how-it-works')">How it Works</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Company</h4>
                    <ul class="footer-links">
                        <li><a onclick="navigate('about')">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-title">Support</h4>
                    <ul class="footer-links">
                        <li><a href="#">Help Centre</a></li>
                        <li><a href="#">Safety Tips</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© 2026 iSQROLL Limited. All rights reserved.</p>
                <div class="powered-by">
                    Powered by <a href="https://sidequestdigital.co.nz" target="_blank">Sidequest Digital</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal" onclick="if(event.target===this)closeModal('login')">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Welcome back</h2>
                <button class="modal-close" onclick="closeModal('login')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="demo-credentials">
                    <div class="demo-credentials-title">üîë Demo Account</div>
                    <p>Email: <code>demo@isqroll.co.nz</code></p>
                    <p>Password: <code>demo123</code></p>
                </div>
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="loginEmail" value="demo@isqroll.co.nz" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="loginPassword" value="demo123" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Log in</button>
                </form>
                <p style="text-align: center; margin-top: 20px; font-size: 14px; color: var(--grey-500);">
                    Don't have an account? <a href="#" onclick="switchModal('login','signup')" style="color: var(--primary); font-weight: 600;">Sign up</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal-overlay" id="signupModal" onclick="if(event.target===this)closeModal('signup')">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Create account</h2>
                <button class="modal-close" onclick="closeModal('signup')">‚úï</button>
            </div>
            <div class="modal-body">
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label class="form-label">Full name</label>
                        <input type="text" class="form-input" id="signupName" placeholder="John Smith" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="signupEmail" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="signupPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <select class="form-input" id="signupLocation">
                            <option>Auckland</option>
                            <option>Wellington</option>
                            <option>Christchurch</option>
                            <option>Hamilton</option>
                            <option>Tauranga</option>
                            <option>Dunedin</option>
                            <option>Whanganui</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Create account</button>
                </form>
                <p style="text-align: center; margin-top: 20px; font-size: 14px; color: var(--grey-500);">
                    Already have an account? <a href="#" onclick="switchModal('signup','login')" style="color: var(--primary); font-weight: 600;">Log in</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"><span id="toastMsg"></span></div>

    <script>
    // ============================================
    // DATA & STATE
    // ============================================
    const DEMO_USER = { id: 'demo-1', email: 'demo@isqroll.co.nz', password: 'demo123', name: 'Demo User', location: 'Auckland', phone: '021 123 4567', bio: 'Demo account for testing iSQROLL', memberSince: 'January 2026' };
    
    const SAMPLE_LISTINGS = [
        { id: 'l1', title: 'iPhone 14 Pro - Excellent Condition', price: 1299, category: 'electronics', location: 'Auckland', description: 'iPhone 14 Pro 256GB Deep Purple. Battery 94%. Includes box and charger.', images: ['https://images.unsplash.com/photo-1678685888221-cda773a3dcdb?w=800'], sellerId: 'u1', sellerName: 'Mike Chen', createdAt: Date.now() - 2*3600000, featured: true, status: 'active' },
        { id: 'l2', title: 'Vintage Leather Sofa', price: 450, category: 'home', location: 'Wellington', description: 'Beautiful vintage 3-seater leather sofa. Great condition with natural patina.', images: ['https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=800'], sellerId: 'u2', sellerName: 'Sarah Williams', createdAt: Date.now() - 5*3600000, featured: false, status: 'active' },
        { id: 'l3', title: 'Giant Talon Mountain Bike', price: 850, category: 'sports', location: 'Christchurch', description: 'Giant Talon 2, size Large. Recently serviced. New brake pads.', images: ['https://images.unsplash.com/photo-1576435728678-68d0fbf94e91?w=800'], sellerId: 'u3', sellerName: 'James Taylor', createdAt: Date.now() - 24*3600000, featured: true, status: 'active' },
        { id: 'l4', title: 'Nike Air Jordan 1 Retro', price: 320, category: 'fashion', location: 'Hamilton', description: 'Air Jordan 1 Chicago colorway. Size US 10. Worn twice.', images: ['https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800'], sellerId: 'u4', sellerName: 'Lisa Park', createdAt: Date.now() - 3*3600000, featured: false, status: 'active' },
        { id: 'l5', title: 'Sony PlayStation 5', price: 699, category: 'electronics', location: 'Auckland', description: 'PS5 Disc Edition with 2 controllers. Includes Spider-Man 2.', images: ['https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?w=800'], sellerId: 'u5', sellerName: 'David Brown', createdAt: Date.now() - 6*3600000, featured: true, status: 'active' },
        { id: 'l6', title: 'Outdoor Dining Set', price: 580, category: 'home', location: 'Tauranga', description: 'Solid wood outdoor table with 6 chairs. Weather resistant.', images: ['https://images.unsplash.com/photo-1600585152220-90363fe7e115?w=800'], sellerId: 'u6', sellerName: 'Emma Wilson', createdAt: Date.now() - 24*3600000, featured: false, status: 'active' },
        { id: 'l7', title: 'Canon EOS R5 Camera', price: 4500, category: 'electronics', location: 'Wellington', description: 'Canon EOS R5 body only. Low shutter count. Immaculate.', images: ['https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=800'], sellerId: 'u7', sellerName: 'Tom Anderson', createdAt: Date.now() - 4*3600000, featured: true, status: 'active' },
        { id: 'l8', title: 'Surfboard 6\'2"', price: 380, category: 'sports', location: 'Raglan', description: 'DHD shortboard. Great for intermediate surfers. Fins included.', images: ['https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=800'], sellerId: 'u8', sellerName: 'Jack Morrison', createdAt: Date.now() - 48*3600000, featured: false, status: 'active' },
        { id: 'l9', title: 'Louis Vuitton Neverfull', price: 1850, category: 'fashion', location: 'Auckland', description: 'Authentic LV Neverfull MM. Damier Ebene. Have receipt.', images: ['https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=800'], sellerId: 'u9', sellerName: 'Sophie Lee', createdAt: Date.now() - 8*3600000, featured: true, status: 'active' },
        { id: 'l10', title: 'LEGO Millennium Falcon', price: 250, category: 'toys', location: 'Dunedin', description: 'Complete with all pieces and minifigures. Instructions included.', images: ['https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800'], sellerId: 'u10', sellerName: 'Ryan Hughes', createdAt: Date.now() - 12*3600000, featured: false, status: 'active' },
        { id: 'l11', title: '2019 Toyota Corolla GLX', price: 22500, category: 'vehicles', location: 'Auckland', description: 'Only 45,000km. Full service history. Apple CarPlay.', images: ['https://images.unsplash.com/photo-1623869675781-80aa31012a5a?w=800'], sellerId: 'u11', sellerName: 'Chris Martin', createdAt: Date.now() - 24*3600000, featured: true, status: 'active' },
        { id: 'l12', title: 'MacBook Pro 14" M3', price: 3200, category: 'electronics', location: 'Wellington', description: 'M3 Pro, 18GB RAM, 512GB. AppleCare+ until 2026.', images: ['https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=800'], sellerId: 'u12', sellerName: 'Amy Zhang', createdAt: Date.now() - 3*3600000, featured: false, status: 'active' }
    ];
    
    let currentUser = null;
    let listings = [];
    let savedItems = [];
    let currentPage = 'home';
    let currentListingId = null;
    let editingListingId = null;

    // ============================================
    // INIT
    // ============================================
    function init() {
        loadState();
        handleRoute();
        window.addEventListener('popstate', handleRoute);
    }
    
    function loadState() {
        const u = localStorage.getItem('isqroll_user');
        if (u) currentUser = JSON.parse(u);
        const l = localStorage.getItem('isqroll_listings');
        listings = l ? JSON.parse(l) : [...SAMPLE_LISTINGS];
        if (!l) saveListings();
        const s = localStorage.getItem('isqroll_saved');
        if (s) savedItems = JSON.parse(s);
        updateAuthUI();
    }
    
    function saveListings() { localStorage.setItem('isqroll_listings', JSON.stringify(listings)); }
    function saveUser() { currentUser ? localStorage.setItem('isqroll_user', JSON.stringify(currentUser)) : localStorage.removeItem('isqroll_user'); }
    function saveSaved() { localStorage.setItem('isqroll_saved', JSON.stringify(savedItems)); }

    // ============================================
    // ROUTING
    // ============================================
    function navigate(page, param) {
        currentPage = page;
        if (param) {
            if (page === 'listing') currentListingId = param;
            if (page === 'edit-listing') editingListingId = param;
        }
        history.pushState({ page, param }, '', `#${page}${param ? '/' + param : ''}`);
        renderPage();
        window.scrollTo(0, 0);
    }
    
    function handleRoute() {
        const hash = window.location.hash.slice(1) || 'home';
        const [page, param] = hash.split('/');
        currentPage = page;
        if (param) {
            if (page === 'listing') currentListingId = param;
            if (page === 'edit-listing') editingListingId = param;
        }
        renderPage();
    }
    
    function renderPage() {
        const app = document.getElementById('app');
        switch(currentPage) {
            case 'home': app.innerHTML = renderHome(); break;
            case 'browse': app.innerHTML = renderBrowse(); break;
            case 'categories': app.innerHTML = renderCategories(); break;
            case 'how-it-works': app.innerHTML = renderHowItWorks(); break;
            case 'about': app.innerHTML = renderAbout(); break;
            case 'listing': app.innerHTML = renderListingDetail(); break;
            case 'profile': app.innerHTML = renderProfile(); break;
            case 'my-listings': app.innerHTML = renderMyListings(); break;
            case 'saved': app.innerHTML = renderSaved(); break;
            case 'create-listing': app.innerHTML = renderCreateListing(); break;
            case 'edit-listing': app.innerHTML = renderEditListing(); break;
            default: app.innerHTML = renderHome();
        }
    }

    // ============================================
    // AUTH
    // ============================================
    function updateAuthUI() {
        const nav = document.getElementById('navActions');
        const mobile = document.getElementById('mobileNavActions');
        if (currentUser) {
            nav.innerHTML = `
                <button class="btn btn-primary" onclick="navigate('create-listing')">+ Sell</button>
                <div class="user-menu">
                    <div class="user-avatar" onclick="toggleDropdown()">${currentUser.name.charAt(0)}</div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-header">
                            <div class="user-dropdown-name">${currentUser.name}</div>
                            <div class="user-dropdown-email">${currentUser.email}</div>
                        </div>
                        <div class="user-dropdown-item" onclick="navigate('profile')">üë§ My Profile</div>
                        <div class="user-dropdown-item" onclick="navigate('my-listings')">üì¶ My Listings</div>
                        <div class="user-dropdown-item" onclick="navigate('saved')">‚ù§Ô∏è Saved Items</div>
                        <div class="user-dropdown-item danger" onclick="logout()">üö™ Log Out</div>
                    </div>
                </div>`;
            mobile.innerHTML = `
                <button class="btn btn-secondary" onclick="navigate('profile'); toggleMobileMenu();">Profile</button>
                <button class="btn btn-primary" onclick="navigate('create-listing'); toggleMobileMenu();">Sell</button>`;
        } else {
            nav.innerHTML = `<button class="btn btn-ghost" onclick="openModal('login')">Log in</button><button class="btn btn-primary" onclick="openModal('signup')">Sign up</button>`;
            mobile.innerHTML = `<button class="btn btn-secondary" onclick="openModal('login'); toggleMobileMenu();">Log in</button><button class="btn btn-primary" onclick="openModal('signup'); toggleMobileMenu();">Sign up</button>`;
        }
    }
    
    function toggleDropdown() { document.getElementById('userDropdown').classList.toggle('active'); }
    document.addEventListener('click', e => { const d = document.getElementById('userDropdown'); if (d && !e.target.closest('.user-menu')) d.classList.remove('active'); });
    
    function handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const pass = document.getElementById('loginPassword').value;
        if (email === DEMO_USER.email && pass === DEMO_USER.password) {
            currentUser = {...DEMO_USER};
            saveUser();
            updateAuthUI();
            closeModal('login');
            showToast('Welcome back, ' + currentUser.name + '!');
            renderPage();
        } else {
            showToast('Invalid credentials', 'error');
        }
    }
    
    function handleSignup(e) {
        e.preventDefault();
        currentUser = {
            id: 'user-' + Date.now(),
            name: document.getElementById('signupName').value,
            email: document.getElementById('signupEmail').value,
            password: document.getElementById('signupPassword').value,
            location: document.getElementById('signupLocation').value,
            phone: '', bio: '', memberSince: 'January 2026'
        };
        saveUser();
        updateAuthUI();
        closeModal('signup');
        showToast('Welcome to iSQROLL, ' + currentUser.name + '!');
    }
    
    function logout() {
        currentUser = null;
        saveUser();
        updateAuthUI();
        navigate('home');
        showToast('Logged out successfully');
    }

    // ============================================
    // MODALS & UI
    // ============================================
    function openModal(id) { document.getElementById(id + 'Modal').classList.add('active'); document.body.style.overflow = 'hidden'; }
    function closeModal(id) { document.getElementById(id + 'Modal').classList.remove('active'); document.body.style.overflow = ''; }
    function switchModal(from, to) { closeModal(from); setTimeout(() => openModal(to), 200); }
    function toggleMobileMenu() { document.getElementById('mobileNav').classList.toggle('active'); }
    function showToast(msg, type = 'success') { const t = document.getElementById('toast'); t.className = 'toast show ' + type; document.getElementById('toastMsg').textContent = msg; setTimeout(() => t.classList.remove('show'), 3000); }
    
    // ============================================
    // HELPERS
    // ============================================
    function timeAgo(ts) {
        const s = Math.floor((Date.now() - ts) / 1000);
        if (s < 60) return 'Just now';
        if (s < 3600) return Math.floor(s/60) + 'm ago';
        if (s < 86400) return Math.floor(s/3600) + 'h ago';
        return Math.floor(s/86400) + 'd ago';
    }
    function formatPrice(p) { return '$' + p.toLocaleString(); }
    function isSaved(id) { return savedItems.includes(id); }
    function toggleSave(e, id) {
        e.stopPropagation(); e.preventDefault();
        if (!currentUser) { openModal('login'); return; }
        const i = savedItems.indexOf(id);
        if (i === -1) { savedItems.push(id); showToast('Saved!'); }
        else { savedItems.splice(i, 1); showToast('Removed'); }
        saveSaved();
        renderPage();
    }

    // ============================================
    // LISTING CARDS
    // ============================================
    function renderListingCard(l, showActions = false) {
        const saved = isSaved(l.id);
        const isOwner = currentUser?.id === l.sellerId;
        return `
        <div class="listing-card" onclick="navigate('listing','${l.id}')">
            <div class="listing-image">
                <img src="${l.images[0]}" alt="${l.title}">
                ${l.featured ? '<span class="listing-badge">Featured</span>' : ''}
                ${showActions && l.status ? `<span class="listing-status ${l.status}">${l.status}</span>` : ''}
                ${!showActions ? `<button class="listing-save ${saved?'saved':''}" onclick="toggleSave(event,'${l.id}')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="${saved?'currentColor':'none'}" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                </button>` : ''}
            </div>
            <div class="listing-content">
                <h3 class="listing-title">${l.title}</h3>
                <div class="listing-price">${formatPrice(l.price)}</div>
                <div class="listing-meta"><span>üìç ${l.location}</span><span>${timeAgo(l.createdAt)}</span></div>
            </div>
            ${showActions && isOwner ? `<div class="listing-actions">
                <button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); navigate('edit-listing','${l.id}')">Edit</button>
                <button class="btn btn-danger btn-sm" onclick="event.stopPropagation(); deleteListing('${l.id}')">Delete</button>
            </div>` : ''}
        </div>`;
    }

    // ============================================
    // PAGE RENDERERS
    // ============================================
    function renderHome() {
        const featured = listings.filter(l => l.status === 'active').slice(0, 8);
        return `
        <section class="hero">
            <div class="container">
                <div class="hero-grid">
                    <div>
                        <h1>Buy & sell with<br><span>Kiwis you trust</span></h1>
                        <p>New Zealand's community marketplace. Find great deals, sell your stuff, and connect with real people.</p>
                        <div class="hero-actions">
                            <button class="btn btn-primary btn-lg" onclick="${currentUser ? "navigate('create-listing')" : "openModal('login')"}">+ Start Selling</button>
                            <button class="btn btn-secondary btn-lg" onclick="navigate('browse')">Explore Listings</button>
                        </div>
                        <div class="hero-stats">
                            <div><div class="hero-stat-value">12K+</div><div class="hero-stat-label">Active Listings</div></div>
                            <div><div class="hero-stat-value">8.5K</div><div class="hero-stat-label">Kiwi Sellers</div></div>
                            <div><div class="hero-stat-value">$2.4M</div><div class="hero-stat-label">Items Sold</div></div>
                        </div>
                    </div>
                    <div class="hero-visual">
                        <div class="hero-card">
                            <div class="hero-card-image"><img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400" alt="Product"></div>
                            <h3 style="font-size:18px;font-weight:600;margin-bottom:8px;">Premium Smart Watch</h3>
                            <div style="font-family:var(--font-display);font-size:24px;font-weight:700;color:var(--primary);">$299</div>
                            <div style="font-size:13px;color:var(--grey-500);margin-top:12px;">üìç Auckland ‚Ä¢ 2h ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="search-section">
            <div class="container">
                <div class="search-bar">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input type="text" class="search-input" id="homeSearch" placeholder="Search for anything..." onkeyup="if(event.key==='Enter')doSearch()">
                    </div>
                    <select class="category-select" id="homeCat"><option value="">All Categories</option><option value="electronics">Electronics</option><option value="vehicles">Vehicles</option><option value="home">Home & Garden</option><option value="fashion">Fashion</option><option value="sports">Sports</option><option value="toys">Toys</option></select>
                    <button class="btn btn-primary" onclick="doSearch()">Search</button>
                </div>
                <div class="categories">
                    <button class="category-pill active" onclick="filterCat(this,'')">All</button>
                    <button class="category-pill" onclick="filterCat(this,'electronics')">Electronics</button>
                    <button class="category-pill" onclick="filterCat(this,'vehicles')">Vehicles</button>
                    <button class="category-pill" onclick="filterCat(this,'home')">Home</button>
                    <button class="category-pill" onclick="filterCat(this,'fashion')">Fashion</button>
                    <button class="category-pill" onclick="filterCat(this,'sports')">Sports</button>
                </div>
            </div>
        </section>
        <section style="padding:60px 0;">
            <div class="container">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;">
                    <h2 style="font-family:var(--font-display);font-size:28px;font-weight:700;">Fresh Listings</h2>
                    <button class="btn btn-ghost" onclick="navigate('browse')">View all ‚Üí</button>
                </div>
                <div class="listings-grid">${featured.map(l => renderListingCard(l)).join('')}</div>
            </div>
        </section>`;
    }
    
    function renderBrowse() {
        const active = listings.filter(l => l.status === 'active');
        return `
        <section class="search-section" style="padding-top:40px;">
            <div class="container">
                <div class="search-bar">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input type="text" class="search-input" id="browseSearch" placeholder="Search..." oninput="filterBrowse()">
                    </div>
                    <select class="category-select" id="browseCat" onchange="filterBrowse()"><option value="">All</option><option value="electronics">Electronics</option><option value="vehicles">Vehicles</option><option value="home">Home</option><option value="fashion">Fashion</option><option value="sports">Sports</option><option value="toys">Toys</option></select>
                </div>
            </div>
        </section>
        <section style="padding:40px 0 80px;">
            <div class="container">
                <h2 style="font-family:var(--font-display);font-size:28px;font-weight:700;margin-bottom:32px;">All Listings</h2>
                <div class="listings-grid" id="browseGrid">${active.map(l => renderListingCard(l)).join('')}</div>
            </div>
        </section>`;
    }
    
    function filterBrowse() {
        const search = document.getElementById('browseSearch').value.toLowerCase();
        const cat = document.getElementById('browseCat').value;
        let filtered = listings.filter(l => l.status === 'active');
        if (cat) filtered = filtered.filter(l => l.category === cat);
        if (search) filtered = filtered.filter(l => l.title.toLowerCase().includes(search));
        document.getElementById('browseGrid').innerHTML = filtered.map(l => renderListingCard(l)).join('') || '<p style="grid-column:1/-1;text-align:center;color:var(--grey-500);padding:40px;">No listings found</p>';
    }
    
    function doSearch() {
        const s = document.getElementById('homeSearch')?.value || '';
        const c = document.getElementById('homeCat')?.value || '';
        navigate('browse');
        setTimeout(() => {
            if (s) document.getElementById('browseSearch').value = s;
            if (c) document.getElementById('browseCat').value = c;
            filterBrowse();
        }, 50);
    }
    
    function filterCat(el, cat) {
        document.querySelectorAll('.category-pill').forEach(p => p.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('homeCat').value = cat;
        doSearch();
    }
    
    function renderCategories() {
        const cats = [
            { id: 'electronics', icon: 'üì±', name: 'Electronics', count: listings.filter(l => l.category === 'electronics').length },
            { id: 'vehicles', icon: 'üöó', name: 'Vehicles', count: listings.filter(l => l.category === 'vehicles').length },
            { id: 'home', icon: 'üè†', name: 'Home & Garden', count: listings.filter(l => l.category === 'home').length },
            { id: 'fashion', icon: 'üëó', name: 'Fashion', count: listings.filter(l => l.category === 'fashion').length },
            { id: 'sports', icon: '‚öΩ', name: 'Sports & Outdoors', count: listings.filter(l => l.category === 'sports').length },
            { id: 'toys', icon: 'üéÆ', name: 'Toys & Games', count: listings.filter(l => l.category === 'toys').length }
        ];
        return `
        <div class="page-header"><div class="container"><h1>Categories</h1><p>Browse by category</p></div></div>
        <div class="container">
            <div class="categories-grid">
                ${cats.map(c => `<div class="category-card" onclick="navigate('browse'); setTimeout(()=>{document.getElementById('browseCat').value='${c.id}';filterBrowse();},50);">
                    <div class="category-icon">${c.icon}</div>
                    <h3>${c.name}</h3>
                    <p>${c.count} listings</p>
                </div>`).join('')}
            </div>
        </div>`;
    }
    
    function renderHowItWorks() {
        return `
        <div class="page-header"><div class="container"><h1>How it Works</h1><p>Buying and selling made simple</p></div></div>
        <div class="container">
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üìù</div>
                    <h3>Create a Listing</h3>
                    <p>Take some photos, write a description, set your price. It only takes a minute.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí¨</div>
                    <h3>Connect with Buyers</h3>
                    <p>Interested buyers will message you directly. Arrange a time to meet.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ü§ù</div>
                    <h3>Make the Sale</h3>
                    <p>Meet up, exchange goods for cash, and you're done. Simple as that.</p>
                </div>
            </div>
        </div>`;
    }
    
    function renderAbout() {
        return `
        <div class="page-header"><div class="container"><h1>About iSQROLL</h1><p>A marketplace for the people</p></div></div>
        <div class="container" style="max-width:800px;padding:40px 24px 80px;">
            <div class="card"><div class="card-body">
                <p style="font-size:18px;line-height:1.8;color:var(--grey-600);margin-bottom:24px;">
                    iSQROLL is New Zealand's community marketplace. We believe buying and selling should be simple, safe, and accessible to everyone.
                </p>
                <p style="line-height:1.8;color:var(--grey-600);margin-bottom:24px;">
                    Founded in Whanganui, we're building a platform that connects Kiwis with their neighbours. Whether you're decluttering, hunting for a bargain, or running a small business ‚Äì iSQROLL is here for you.
                </p>
                <p style="line-height:1.8;color:var(--grey-600);">
                    Our mission is to create a trusted marketplace where every New Zealander can participate in the circular economy.
                </p>
            </div></div>
        </div>`;
    }
    
    function renderListingDetail() {
        const l = listings.find(x => x.id === currentListingId);
        if (!l) return '<div class="container" style="padding:100px 0;text-align:center;"><h2>Listing not found</h2></div>';
        const saved = isSaved(l.id);
        return `
        <div class="container">
            <div class="listing-detail-grid">
                <div>
                    <div class="listing-gallery-main"><img src="${l.images[0]}" alt="${l.title}"></div>
                </div>
                <div>
                    <div class="listing-info-card">
                        <div class="listing-info-price">${formatPrice(l.price)}</div>
                        <h1 class="listing-info-title">${l.title}</h1>
                        <div class="listing-info-meta">
                            <div class="listing-info-meta-item">üìç ${l.location}</div>
                            <div class="listing-info-meta-item">üïê ${timeAgo(l.createdAt)}</div>
                            <div class="listing-info-meta-item">üìÇ ${l.category}</div>
                        </div>
                        <div class="listing-info-description">${l.description}</div>
                        <button class="btn btn-primary" style="width:100%;margin-bottom:12px;" onclick="${currentUser ? "showToast('Message sent!')" : "openModal('login')"}">üí¨ Message Seller</button>
                        <button class="btn btn-secondary ${saved?'saved':''}" style="width:100%;" onclick="toggleSave(event,'${l.id}')">${saved ? '‚ù§Ô∏è Saved' : 'ü§ç Save'}</button>
                        <div class="seller-card">
                            <div class="seller-avatar">${l.sellerName.charAt(0)}</div>
                            <div class="seller-info"><h4>${l.sellerName}</h4><p>${l.location}</p></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
    }
    
    function renderProfile() {
        if (!currentUser) { navigate('home'); openModal('login'); return ''; }
        const myCount = listings.filter(l => l.sellerId === currentUser.id).length;
        return `
        <div class="page-header"><div class="container"><h1>My Profile</h1></div></div>
        <div class="container">
            <div class="profile-layout">
                <div class="profile-sidebar">
                    <div class="profile-card">
                        <div class="profile-avatar">${currentUser.name.charAt(0)}</div>
                        <div class="profile-name">${currentUser.name}</div>
                        <div class="profile-location">üìç ${currentUser.location}</div>
                        <div class="profile-stats">
                            <div><div class="profile-stat-value">${myCount}</div><div class="profile-stat-label">Listings</div></div>
                            <div><div class="profile-stat-value">${savedItems.length}</div><div class="profile-stat-label">Saved</div></div>
                        </div>
                    </div>
                    <div class="profile-nav">
                        <div class="profile-nav-item active" onclick="navigate('profile')">üë§ Profile</div>
                        <div class="profile-nav-item" onclick="navigate('my-listings')">üì¶ My Listings</div>
                        <div class="profile-nav-item" onclick="navigate('saved')">‚ù§Ô∏è Saved Items</div>
                    </div>
                </div>
                <div class="profile-content">
                    <div class="card">
                        <div class="card-header"><h3 class="card-title">Edit Profile</h3></div>
                        <div class="card-body">
                            <form onsubmit="saveProfile(event)">
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Name</label><input type="text" class="form-input" id="profName" value="${currentUser.name}"></div>
                                    <div class="form-group"><label class="form-label">Location</label><select class="form-input" id="profLoc">${['Auckland','Wellington','Christchurch','Hamilton','Tauranga','Dunedin','Whanganui'].map(c => `<option ${currentUser.location===c?'selected':''}>${c}</option>`).join('')}</select></div>
                                </div>
                                <div class="form-group"><label class="form-label">Phone</label><input type="text" class="form-input" id="profPhone" value="${currentUser.phone || ''}" placeholder="021 123 4567"></div>
                                <div class="form-group"><label class="form-label">Bio</label><textarea class="form-input form-textarea" id="profBio" placeholder="Tell us about yourself...">${currentUser.bio || ''}</textarea></div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
    }
    
    function saveProfile(e) {
        e.preventDefault();
        currentUser.name = document.getElementById('profName').value;
        currentUser.location = document.getElementById('profLoc').value;
        currentUser.phone = document.getElementById('profPhone').value;
        currentUser.bio = document.getElementById('profBio').value;
        saveUser();
        updateAuthUI();
        showToast('Profile updated!');
    }
    
    function renderMyListings() {
        if (!currentUser) { navigate('home'); openModal('login'); return ''; }
        const my = listings.filter(l => l.sellerId === currentUser.id);
        return `
        <div class="page-header"><div class="container"><div style="display:flex;justify-content:space-between;align-items:center;"><div><h1>My Listings</h1><p>${my.length} listings</p></div><button class="btn btn-primary" onclick="navigate('create-listing')">+ New Listing</button></div></div></div>
        <div class="container" style="padding:40px 0 80px;">
            ${my.length ? `<div class="listings-grid">${my.map(l => renderListingCard(l, true)).join('')}</div>` : `
            <div class="empty-state">
                <div class="empty-state-icon">üì¶</div>
                <h3>No listings yet</h3>
                <p>Start selling today!</p>
                <button class="btn btn-primary" onclick="navigate('create-listing')">Create Listing</button>
            </div>`}
        </div>`;
    }
    
    function deleteListing(id) {
        if (!confirm('Delete this listing?')) return;
        listings = listings.filter(l => l.id !== id);
        saveListings();
        showToast('Listing deleted');
        renderPage();
    }
    
    function renderSaved() {
        if (!currentUser) { navigate('home'); openModal('login'); return ''; }
        const saved = listings.filter(l => savedItems.includes(l.id));
        return `
        <div class="page-header"><div class="container"><h1>Saved Items</h1><p>${saved.length} items</p></div></div>
        <div class="container" style="padding:40px 0 80px;">
            ${saved.length ? `<div class="listings-grid">${saved.map(l => renderListingCard(l)).join('')}</div>` : `
            <div class="empty-state">
                <div class="empty-state-icon">‚ù§Ô∏è</div>
                <h3>No saved items</h3>
                <p>Items you save will appear here</p>
                <button class="btn btn-primary" onclick="navigate('browse')">Browse Listings</button>
            </div>`}
        </div>`;
    }
    
    function renderCreateListing() {
        if (!currentUser) { navigate('home'); openModal('login'); return ''; }
        return `
        <div class="page-header"><div class="container"><h1>Create Listing</h1></div></div>
        <div class="container" style="max-width:700px;padding:40px 24px 80px;">
            <div class="card"><div class="card-body">
                <form onsubmit="createListing(event)">
                    <div class="form-group">
                        <label class="form-label">Photos</label>
                        <div class="image-upload-grid">
                            ${[0,1,2,3].map(i => `<div class="image-upload-item" onclick="document.getElementById('img${i}').click()">
                                <input type="file" id="img${i}" accept="image/*" style="display:none" onchange="previewImg(this,${i})">
                                <div id="imgPreview${i}"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg><div style="font-size:12px;color:var(--grey-500);margin-top:8px;">Add photo</div></div>
                            </div>`).join('')}
                        </div>
                        <div class="form-hint">Add up to 4 photos. First photo is the main image.</div>
                    </div>
                    <div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" id="newTitle" placeholder="What are you selling?" required></div>
                    <div class="form-row">
                        <div class="form-group"><label class="form-label">Category</label><select class="form-input" id="newCat" required><option value="">Select...</option><option value="electronics">Electronics</option><option value="vehicles">Vehicles</option><option value="home">Home & Garden</option><option value="fashion">Fashion</option><option value="sports">Sports</option><option value="toys">Toys</option></select></div>
                        <div class="form-group"><label class="form-label">Price ($)</label><input type="number" class="form-input" id="newPrice" placeholder="0" required></div>
                    </div>
                    <div class="form-group"><label class="form-label">Description</label><textarea class="form-input form-textarea" id="newDesc" placeholder="Describe your item..."></textarea></div>
                    <div class="form-group"><label class="form-label">Location</label><select class="form-input" id="newLoc">${['Auckland','Wellington','Christchurch','Hamilton','Tauranga','Dunedin','Whanganui','Raglan'].map(c => `<option ${currentUser.location===c?'selected':''}>${c}</option>`).join('')}</select></div>
                    <button type="submit" class="btn btn-primary" style="width:100%;">Publish Listing</button>
                </form>
            </div></div>
        </div>`;
    }
    
    let uploadedImages = ['https://images.unsplash.com/photo-1560343090-f0409e92791a?w=800','','',''];
    function previewImg(input, idx) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => {
                uploadedImages[idx] = e.target.result;
                document.getElementById('imgPreview'+idx).innerHTML = `<img src="${e.target.result}" style="width:100%;height:100%;object-fit:cover;"><button class="remove-btn" onclick="event.stopPropagation();removeImg(${idx})">‚úï</button>`;
                document.getElementById('imgPreview'+idx).parentElement.classList.add('has-image');
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
    function removeImg(idx) {
        uploadedImages[idx] = '';
        document.getElementById('imgPreview'+idx).innerHTML = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg><div style="font-size:12px;color:var(--grey-500);margin-top:8px;">Add photo</div>`;
        document.getElementById('imgPreview'+idx).parentElement.classList.remove('has-image');
        document.getElementById('img'+idx).value = '';
    }
    
    function createListing(e) {
        e.preventDefault();
        const images = uploadedImages.filter(i => i);
        if (!images.length) images.push('https://images.unsplash.com/photo-1560343090-f0409e92791a?w=800');
        const newL = {
            id: 'l' + Date.now(),
            title: document.getElementById('newTitle').value,
            price: parseInt(document.getElementById('newPrice').value),
            category: document.getElementById('newCat').value,
            location: document.getElementById('newLoc').value,
            description: document.getElementById('newDesc').value,
            images: images,
            sellerId: currentUser.id,
            sellerName: currentUser.name,
            createdAt: Date.now(),
            featured: false,
            status: 'active'
        };
        listings.unshift(newL);
        saveListings();
        uploadedImages = ['','','',''];
        showToast('Listing created!');
        navigate('my-listings');
    }
    
    function renderEditListing() {
        if (!currentUser) { navigate('home'); openModal('login'); return ''; }
        const l = listings.find(x => x.id === editingListingId);
        if (!l || l.sellerId !== currentUser.id) return '<div class="container" style="padding:100px 0;text-align:center;"><h2>Listing not found</h2></div>';
        return `
        <div class="page-header"><div class="container"><h1>Edit Listing</h1></div></div>
        <div class="container" style="max-width:700px;padding:40px 24px 80px;">
            <div class="card"><div class="card-body">
                <form onsubmit="updateListing(event)">
                    <div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" id="editTitle" value="${l.title}" required></div>
                    <div class="form-row">
                        <div class="form-group"><label class="form-label">Category</label><select class="form-input" id="editCat">${['electronics','vehicles','home','fashion','sports','toys'].map(c => `<option value="${c}" ${l.category===c?'selected':''}>${c}</option>`).join('')}</select></div>
                        <div class="form-group"><label class="form-label">Price ($)</label><input type="number" class="form-input" id="editPrice" value="${l.price}" required></div>
                    </div>
                    <div class="form-group"><label class="form-label">Description</label><textarea class="form-input form-textarea" id="editDesc">${l.description}</textarea></div>
                    <div class="form-row">
                        <div class="form-group"><label class="form-label">Location</label><select class="form-input" id="editLoc">${['Auckland','Wellington','Christchurch','Hamilton','Tauranga','Dunedin','Whanganui','Raglan'].map(c => `<option ${l.location===c?'selected':''}>${c}</option>`).join('')}</select></div>
                        <div class="form-group"><label class="form-label">Status</label><select class="form-input" id="editStatus"><option value="active" ${l.status==='active'?'selected':''}>Active</option><option value="sold" ${l.status==='sold'?'selected':''}>Sold</option></select></div>
                    </div>
                    <div style="display:flex;gap:12px;"><button type="submit" class="btn btn-primary" style="flex:1;">Save Changes</button><button type="button" class="btn btn-secondary" onclick="navigate('my-listings')">Cancel</button></div>
                </form>
            </div></div>
        </div>`;
    }
    
    function updateListing(e) {
        e.preventDefault();
        const idx = listings.findIndex(l => l.id === editingListingId);
        if (idx === -1) return;
        listings[idx].title = document.getElementById('editTitle').value;
        listings[idx].price = parseInt(document.getElementById('editPrice').value);
        listings[idx].category = document.getElementById('editCat').value;
        listings[idx].description = document.getElementById('editDesc').value;
        listings[idx].location = document.getElementById('editLoc').value;
        listings[idx].status = document.getElementById('editStatus').value;
        saveListings();
        showToast('Listing updated!');
        navigate('my-listings');
    }
    
    // Start app
    init();
    </script>
</body>
</html>
